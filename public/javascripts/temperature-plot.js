/*! airconditioner-remote 2014-08-17 */
!function(a){"use strict";a.json("/temperature",function(b,c){function d(){a.json("/temperature/"+f,function(b,h){if(h.length){c=c.concat(h);for(var i=0,j=c.length;j>i&&c[i].d<f-e;i++)c.shift()}f=Date.now(),k.domain([f-e-g,f-g]),l.domain([Math.min(20,a.min(c,function(a){return a.t})),Math.max(30,a.max(c,function(a){return a.t}))]).nice(),n.select(".line").attr("d",m).attr("transform",null),q.data([c]).transition().duration(g).ease("linear").attr("transform","translate("+k(f-e-g)+")").each("end",d),o.transition().duration(g).ease("linear").call(k.axis),p.transition().duration(g).ease("linear").call(l.axis)})}var e=36e5,f=Date.now(),g=2500,h={top:6,right:0,bottom:20,left:40},i=450-h.right,j=120-h.top-h.bottom,k=a.time.scale().domain([f-e-g,f-g]).range([0,i]),l=a.scale.linear().domain([10,35]).range([j,0]),m=a.svg.line().interpolate("basis").x(function(a){return k(a.d)}).y(function(a){return l(a.t)}),n=a.select(document.querySelector(".temperature-plot")).append("svg").attr("width",i+h.left+h.right).attr("height",j+h.top+h.bottom).style("margin-left",-h.left+"px").append("g").attr("transform","translate("+h.left+","+h.top+")");n.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",i).attr("height",j);var o=n.append("g").attr("class","x axis").attr("transform","translate(0,"+j+")").call(k.axis=a.svg.axis().scale(k).tickFormat(a.time.format("%H:%M")).orient("bottom")),p=n.append("g").attr("class","y axis").call(l.axis=a.svg.axis().scale(l).ticks(5).tickFormat(function(a){return a+"Â°C"}).orient("left")),q=n.append("g").attr("clip-path","url(#clip)").append("path").data([c]).attr("class","line");d()})}(d3);